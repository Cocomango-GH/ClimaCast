{% extends 'base.html' %}

{% block content %}
<h1>Welcome to ClimaCast!</h1>
<p>This is the home page of the ClimaCast weather app.</p>

<form method="post">
  {% csrf_token %}
  <label for="location">Enter a city:</label>
  <input type="text" name="location" id="location" required>
  <button type="submit">Get Weather</button>
</form>

{% if weather_data %}
  <h1>Weather Forecast for {{ weather_data.location }}</h1>
  <table>
    <thead>
      <tr>
        <P>Date: {{weather_data.date}}</P>
        <p>Location: {{ weather_data.location }}</p>
        <p>Description: {{ weather_data.description }}</p>
        <p>Temperature: {{ weather_data.temperature }}&deg;C</p>
        <p>Humidity: {{ weather_data.humidity }}%</p>
        <p>Wind Speed: {{ weather_data.wind_speed }} m/s</p>
    </tr>
    </thead>
    <tbody>
      {% for forecast in weather_data.forecasts %}
        <tr>
          <td>date: {{ forecast.date }}</td>
          <td>Description: {{ forecast.description }}</td>
          <td>Temperature: {{ forecast.temperature }}</td>
          <td>Humiidity: {{ forecast.humidity }}</td>
          <td>Wind Speed:{{ forecast.wind_speed }}</td>
          <td>
            <form method="post" action="{% url 'update_forecast' location=weather_data.location date=forecast.date %}">
              {% csrf_token %}
              <button type="submit">Update</button>
            </form>
            <form method="post" action="{% url 'delete_forecast' location=weather_data.location date=forecast.date %}">
              {% csrf_token %}
              <button type="submit">Delete</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endif %}
{% endblock %}
